import{isEscEvent,isEnterEvent,trapFocus}from"./utils.js";const modal=document.querySelector(".modal"),closeButton=modal.querySelector(".modal__close"),overlay=modal.querySelector(".overlay"),orderButtons=document.querySelectorAll(".buy-button"),closePopup=()=>{modal.classList.remove("modal--show"),overlay.classList.remove("overlay--show"),document.body.classList.remove("page-no-scroll")},closeOnButton=e=>{e.preventDefault(),closePopup(),closeButton.removeEventListener("click",closeOnButton)},closeOnEnter=e=>{isEnterEvent(e)&&(closePopup(),closeButton.removeEventListener("keydown",closeOnButton))},closeOnOverlay=e=>{e.preventDefault(),closePopup(),overlay.removeEventListener("click",closeOnOverlay)},closeOnEsc=e=>{isEscEvent(e)&&(e.preventDefault(),closePopup(),document.removeEventListener("keydown",closeOnEsc))},openPopup=()=>{for(let e=0;e<orderButtons.length;e++)orderButtons[e].addEventListener("click",(e=>{e.preventDefault(),modal.classList.add("modal--show"),overlay.classList.add("overlay--show"),document.body.classList.add("page-no-scroll");modal.querySelector("input").focus(),closeButton.addEventListener("click",closeOnButton),closeButton.addEventListener("keydown",closeOnEnter),overlay.addEventListener("click",closeOnOverlay),document.addEventListener("keydown",closeOnEsc)}))},trapFocusOnModal=()=>trapFocus(modal);export{openPopup,trapFocusOnModal,closePopup,closeOnButton,closeOnEnter,closeOnOverlay,closeOnEsc};